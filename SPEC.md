# Animal Helper Token (AHT) - Спецификация проекта

## Описание проекта

Animal Helper Token - благотворительная платформа на блокчейне TON, созданная для поддержки приютов для животных. Платформа позволяет пользователям приобретать токены AHT, участвовать в голосованиях по распределению средств между приютами и получать NFT за активное участие.

## Технический стек

- **Frontend**: React, TypeScript
- **Стилизация**: TailwindCSS
- **Анимации**: Framer Motion
- **Blockchain**: TON (The Open Network)
- **Кошелек**: TON Connect
- **Интеграция с Telegram**: Telegram Mini App API
- **Управление состоянием**: React Hooks, контекст

## Структура проекта

```
animal-helper-token/
├── public/
├── src/
│   ├── assets/
│   │   ├── images/
│   │   └── styles/
│   ├── components/
│   │   ├── layout/
│   │   ├── ui/
│   │   └── specific/
│   ├── hooks/
│   ├── pages/
│   ├── services/
│   ├── types/
│   ├── utils/
│   ├── App.tsx
│   └── index.tsx
├── package.json
└── tsconfig.json
```

## Основные компоненты

### Сервисы

1. **TMAService** (`src/services/tma.service.ts`)
   - Управление Telegram Mini App API
   - Инициализация TMA
   - Получение данных пользователя
   - Управление интерфейсом TMA (MainButton, BackButton)

2. **TONService** (`src/services/ton.service.ts`)
   - Интеграция с TON Connect
   - Подключение кошелька
   - Отправка транзакций
   - Получение баланса и данных с блокчейна

3. **APIService** (`src/services/api.service.ts`)
   - Взаимодействие с бэкендом
   - Получение данных о приютах, голосованиях и токенах
   - Обработка запросов и ответов

### Хуки

1. **useTMA** (`src/hooks/useTMA.ts`)
   - React-хук для работы с Telegram Mini App
   - Проверка готовности SDK
   - Получение данных пользователя
   - Синхронизация темы с Telegram

2. **useTonConnect** (`src/hooks/useTonConnect.ts`)
   - Хук для работы с TON Connect
   - Управление подключением кошелька
   - Доступ к адресу пользователя

3. **useTheme** (`src/hooks/useTheme.ts`)
   - Хук для управления темой приложения
   - Синхронизация с темой Telegram

## Основные страницы

1. **Splash Screen** (`src/pages/SplashScreen.tsx`)
   - Стартовый экран, который отображается при первом запуске приложения
   - Анимированный текст о проекте со скоростью, адаптированной для чтения (300 слов в минуту)
   - Мотивационное сообщение с вопросом "Хотите ли вы помочь этому миру стать чуть лучше?"
   - Кнопка "Попробовать" для перехода на главную страницу
   - При повторных запусках: показывает только приветствие и прогресс загрузки
   - Анимированный логотип с эффектом плавного вращения и изменения размера

2. **Главная страница** (`src/pages/Home.tsx`)
   - Презентация проекта
   - Манифест и миссия
   - Статистика по токенам и голосованиям
   - Привилегии держателей токенов

3. **Список приютов** (`src/pages/Shelters.tsx`)
   - Список всех приютов
   - Фильтрация и поиск
   - Карточки приютов с основной информацией

4. **Детальная страница приюта** (`src/pages/ShelterDetails.tsx`)
   - Подробная информация о приюте
   - История пожертвований
   - Форма для пожертвования
   - Галерея с животными

5. **Голосования** (`src/pages/Voting.tsx`)
   - Список активных и завершенных голосований
   - Возможность голосовать
   - Статистика по голосованиям

6. **Профиль пользователя** (`src/pages/Profile.tsx`)
   - Информация о пользователе
   - Баланс токенов AHT
   - История транзакций
   - Коллекция NFT

## UI компоненты

1. **Button** (`src/components/ui/Button.tsx`)
   - Различные варианты кнопок (primary, secondary, outline, ghost)
   - Состояния загрузки
   - Иконки

2. **Card** (`src/components/ui/Card.tsx`)
   - Компонент карточки для отображения информации
   - Различные варианты стилей

3. **LoadingIcon** (`src/components/ui/LoadingIcon.tsx`)
   - Анимированный индикатор загрузки

4. **Icons** (`src/components/ui/icons/index.tsx`)
   - Набор SVG-иконок для приложения

5. **GradientButton** (`src/components/ui/GradientButton.tsx`)
   - Универсальный компонент кнопки с градиентными эффектами

## Smart-контракты

### Token Contract
- Стандартный токен TON (Jetton)
- Функции покупки, передачи и управления токенами

### Voting Contract
- Контракт для организации голосований
- Подсчет голосов на основе балансов токенов

### NFT Contract
- Выпуск NFT за активное участие
- Интеграция с TON NFT стандартом

## План разработки

### Этап 1: Подготовка и базовая структура
- Создание репозитория
- Настройка проекта (React, TypeScript, TailwindCSS)
- Разработка базовых UI компонентов
- Настройка роутинга

### Этап 2: Интеграция с TON и TMA
- Разработка TMAService
- Разработка TONService
- Создание хуков для работы с этими сервисами

### Этап 3: Разработка основных страниц
- Главная страница
- Список приютов
- Страница приюта
- Голосования
- Профиль пользователя

### Этап 4: Smart-контракты
- Разработка и тестирование токен-контракта
- Разработка и тестирование контракта голосований
- Разработка и тестирование NFT-контракта

### Этап 5: Тестирование и отладка
- Функциональное тестирование
- UI/UX тестирование
- Тестирование смарт-контрактов

### Этап 6: Деплой и запуск
- Деплой смарт-контрактов в тестовую сеть
- Деплой веб-приложения
- Интеграция с Telegram Mini Apps

## Фичи для будущих версий

1. **Прямые взаимодействия с приютами**
   - Чат с представителями приютов
   - Видеотрансляции из приютов

2. **Маркетплейс**
   - Продажа товаров, средства от которых идут на поддержку приютов
   - Покупка за AHT токены

3. **Система репутации**
   - Уровни пользователей в зависимости от активности
   - Специальные награды для активных участников

4. **Расширенная аналитика**
   - Подробная статистика по использованию средств
   - Отчеты о достижениях и помощи животным

## Безопасность

- Использование проверенных смарт-контрактов
- Безопасное хранение приватных ключей
- Аудит кода третьими сторонами
- Многоуровневая система проверки транзакций

## Приоритеты развития

1. Прозрачность использования средств
2. Простота и удобство пользовательского интерфейса
3. Безопасность и надежность смарт-контрактов
4. Активное вовлечение сообщества в принятие решений
5. Масштабируемость платформы

## Метрики успеха

- Количество пользователей
- Объем привлеченных средств
- Количество поддержанных приютов
- Активность пользователей в голосованиях
- Обратная связь от сообщества и приютов

## Этапы разработки главной страницы

### 1. Интеграция нового логотипа
- Добавлен новый логотип из `https://i.ibb.co/GBQrN2B/image.png` (заменил `https://i.ibb.co/Zj00170/111-Photoroom.png`)
- Увеличен размер логотипа в 1.5 раза
- Добавлен поворот логотипа на 30 градусов вправо
- Добавлено затемнение 20%
- Реализована анимация движения логотипа при скроллинге страницы:
  - Плавное перемещение вниз
  - Постепенное увеличение угла поворота с 30° до 45°
  - Плавное уменьшение масштаба для эффекта глубины

### 2. Оптимизация отображения логотипа
- Применены CSS-фильтры для устранения видимого силуэта прозрачного фона
- Добавлены фильтры: `contrast(1.1)`, `brightness(0.3)`
- Добавлена тень: `drop-shadow(0 0 10px rgba(0,0,0,0.2))`
- Установлен режим наложения: `mixBlendMode: 'normal'`
- Логотип расположен в правой верхней части страницы

### 3. Добавление эффекта свечения из глубины
- Создан компонент `DeepGlow` для генерации элементов свечения
- Добавлены 5 источников свечения с разными параметрами:
  - Разные размеры (от 15vw до 25vw)
  - Разное расположение в нижней части экрана
  - Разные оттенки синего, голубого, фиолетового и бирюзового цветов
- Реализована анимация пульсации:
  - Плавное изменение прозрачности (от 30% до 50% и обратно)
  - Изменение размера элементов
  - Разная длительность анимации для каждого элемента (от 6 до 10 секунд)

### 4. Улучшение анимации текста
- Разработаны несколько вариантов анимации для заголовков:
  1. Сначала: эффект печатающейся машинки с подсветкой символов
  2. Затем: эффект "выскакивания" букв с 3D-вращением
  3. Финальный: простой всплывающий эффект с последовательным появлением строк
- Реализован последовательный порядок появления элементов:
  - Мини-заголовок "Blockchain Charity Platform"
  - Заголовок "Animal" 
  - Заголовок "Helper"
  - Подзаголовок с описанием платформы

### 5. Настройка повторного срабатывания анимаций
- Для всех секций установлен параметр `viewport={{ once: false, amount: 0.3 }}`
- Это позволяет анимациям срабатывать при каждом скроллинге
- Для заголовка настроена собственная последовательность анимаций с разными задержками

### 6. Оптимизация размеров и расположения элементов
- Заголовки "Animal" и "Helper" разделены на отдельные строки
- Размер текста подзаголовка сначала увеличен на 70%, затем уменьшен на 35%
- Подзаголовок растянут на всю ширину страницы

### 7. Технические улучшения
- Оптимизированы импорты (удалены неиспользуемые)
- Устранены ошибки линтера
- Добавлены подробные комментарии для лучшего понимания кода
- Добавлена поддержка адаптивности для мобильных устройств

## Использованные технологии
- React для разработки интерфейса
- Framer Motion для создания анимаций
- TailwindCSS для стилизации компонентов
- Хуки React (useState, useEffect, useRef) для управления состоянием
- CSS-фильтры и эффекты для визуальных улучшений

# Спецификация компонента GradientButton

## Общая информация
- **Имя компонента:** `GradientButton`
- **Путь к файлу:** `src/components/ui/GradientButton.tsx`
- **Назначение:** Универсальный компонент кнопки с градиентными эффектами для использования во всем приложении Animal Helper Token.

## Описание

`GradientButton` - это кастомизируемый компонент для создания привлекательных кнопок с градиентными эффектами. Все кнопки в приложении используют единую цветовую схему оранжево-черно-бело-лавандового градиента, что создает узнаваемый и современный внешний вид.

## Интерфейс компонента

```typescript
export interface GradientButtonProps {
  onClick?: () => void;
  children: React.ReactNode;
  className?: string;
  isSmall?: boolean;
  fullWidth?: boolean;
  disabled?: boolean;
  type?: 'button' | 'submit' | 'reset';
}
```

## Свойства

| Свойство | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| onClick | () => void | undefined | Функция обработчик клика |
| children | React.ReactNode | - | Содержимое кнопки (обязательное свойство) |
| className | string | "" | Дополнительные CSS классы |
| isSmall | boolean | false | Меньший размер кнопки |
| fullWidth | boolean | false | Растянуть кнопку на всю ширину контейнера |
| disabled | boolean | false | Отключить кнопку |
| type | 'button' \| 'submit' \| 'reset' | 'button' | HTML тип кнопки |

## Визуальные эффекты

Компонент `GradientButton` имеет следующие визуальные эффекты:

1. **Основной стиль:**
   - Полупрозрачный темный фон (rgba(25, 30, 45, 0.9))
   - Эффект размытия фона (backdrop-filter: blur(8px))
   - Тонкая белая рамка (border: 1px solid rgba(255, 255, 255, 0.2))
   - Скругленные углы (border-radius)

2. **Градиентная полоса внизу:**
   - Цветовая схема: оранжевый → черный → белый → лавандовый
   - Анимация появления с эффектом увеличения ширины

3. **Эффекты наведения:**
   - Увеличение размера (scale: 1.05)
   - Светящаяся тень (boxShadow)
   - Появление градиентной заливки

4. **Эффекты при нажатии:**
   - Уменьшение размера (scale: 0.95)
   - Изменение тени

5. **Постоянная анимация:**
   - Пульсирующая тень для привлечения внимания

## Цветовая схема

Компонент использует градиент со следующими цветами (слева направо):
- Оранжевый (#FF7E1D)
- Черный (#121212)
- Белый (#FFFFFF)
- Лавандовый (#8860d0)

## Использование в приложении

Компонент `GradientButton` используется во всех разделах приложения:

1. **SplashScreen** - кнопка "Попробовать"
2. **Home** - кнопки действий на главной странице
3. **CommDetails** - кнопки перехода в сообщество и возврата к списку
4. **Profile** - кнопки подключения кошелька и покупки токенов
5. **Voting** - кнопки фильтрации, создания голосования и вариантов голосования

## Примеры использования

### Стандартная кнопка
```jsx
<GradientButton onClick={handleClick}>
  Нажми меня
</GradientButton>
```

### Маленькая кнопка
```jsx
<GradientButton isSmall onClick={handleClick}>
  Действие
</GradientButton>
```

### Кнопка во всю ширину
```jsx
<GradientButton fullWidth onClick={handlePurchase}>
  Купить токены
</GradientButton>
```

### Отключенная кнопка
```jsx
<GradientButton disabled>
  Недоступно
</GradientButton>
```

### Кнопка с дополнительными стилями
```jsx
<GradientButton className="mt-4 opacity-90">
  Кастомная кнопка
</GradientButton>
```

## Адаптация для различных разделов

Компонент хорошо адаптируется для различных контекстов использования:

- В разделе голосований для вариантов голосования (За/Против/Воздержаться) используется модификация с кольцевым выделением активного выбора
- В экранах профиля при отключенном кошельке показывается упрощенный интерфейс с одной кнопкой подключения
- В SplashScreen кнопка имеет дополнительное светящееся подсвечивание для привлечения внимания

## Дополнительно

Компонент построен с использованием библиотеки Framer Motion для анимаций, что обеспечивает плавные и отзывчивые переходы между состояниями.

# Спецификация компонента logo.svg

## Общая информация
- **Имя файла:** `logo.svg`
- **Путь к файлу:** `src/assets/images/logo.svg`
- **Назначение:** Логотип приложения Animal Helper Token, представляющий концепцию благотворительности для животных.

## Описание

Логотип Animal Helper Token представляет собой сложное SVG-изображение, объединяющее символы заботы о животных и благотворительности. Он включает в себя следующие элементы:

1. **Круг с отпечатком лапы и сердцем:**
   - Круглая основа для логотипа
   - Отпечаток лапы животного как основной символ
   - Сердце внутри лапы, символизирующее любовь и заботу

2. **Волнистые градиентные элементы:**
   - Разноцветные волны, создающие ощущение движения
   - Используются яркие градиенты для привлечения внимания

3. **Декоративные круги:**
   - Маленькие круги разных размеров и цветов
   - Создают эффект сияния и подчеркивают главный элемент

## Цветовая схема

Логотип использует следующие основные цвета:
- Кремовый фон (#FFFCF0)
- Темно-синий (#001F3F) для основных элементов
- Градиенты от оранжевого к розовому для волнистых элементов
- Яркие акценты голубого (#00B4DB), фиолетового (#8860D0) и бирюзового цветов

## Анимация логотипа

В приложении для логотипа используются следующие анимации:

1. **На SplashScreen:**
   - Плавное вращение на 360 градусов
   - Пульсация размера для эффекта дыхания
   - Постепенное увеличение яркости

2. **На главной странице:**
   - Плавное перемещение при скроллинге
   - Небольшой наклон в зависимости от положения скролла
   - Эффект параллакса для создания глубины

3. **В мобильной версии:**
   - Упрощенные анимации для снижения нагрузки
   - Фиксированное расположение в шапке при скроллинге

## Технические детали

1. **SVG-оптимизация:**
   - Файл оптимизирован для уменьшения размера
   - Используются переиспользуемые элементы для снижения избыточности
   - Важные элементы имеют идентификаторы для управления через CSS/JS

2. **Доступность:**
   - Включены атрибуты доступности для скринридеров
   - Элементы имеют подходящий контраст для восприятия

3. **Адаптивность:**
   - Логотип адаптируется к различным размерам экрана
   - Поддерживает масштабирование без потери качества
   - Специальная версия для маленьких размеров (иконка)

## Использование в приложении

Логотип используется в следующих разделах приложения:

1. **SplashScreen** - центральный элемент загрузочного экрана
2. **Шапка приложения** - уменьшенная версия в верхнем левом углу
3. **Главная страница** - декоративный элемент с параллакс-эффектом
4. **Страница профиля** - элемент брендинга среди достижений пользователя
5. **Подвал приложения** - часть списка партнеров и информации о проекте

## Реализация в коде

Для управления логотипом в приложении используются следующие техники:

1. **Импорт SVG как React-компонент:**
   ```jsx
   import { ReactComponent as Logo } from 'src/assets/images/logo.svg';
   ```

2. **Стилизация с помощью Tailwind CSS:**
   ```jsx
   <Logo className="w-24 h-24 md:w-32 md:h-32 filter drop-shadow-lg" />
   ```

3. **Анимация с помощью Framer Motion:**
   ```jsx
   <motion.div
     animate={{ rotate: 360 }}
     transition={{ duration: 20, repeat: Infinity, ease: "linear" }}
   >
     <Logo className="w-full h-full" />
   </motion.div>
   ```

## Дополнительно

Логотип регулярно обновляется для поддержания свежего и современного вида приложения. Последнее обновление включало:
- Оптимизацию для лучшей производительности на мобильных устройствах
- Улучшение цветовой гаммы для лучшего соответствия общему дизайну приложения
- Добавление новых анимационных возможностей для интерактивного взаимодействия 

## Обновления компонентов

### Обновление дизайна кнопок на странице Voting.tsx
- Все кнопки приведены к единому стилю в соответствии с компонентом GradientButton, используемым на главной странице
- Свойства GradientButton:
  - Темный фон с полупрозрачностью (`rgba(25, 30, 45, 0.9)`)
  - Тонкая белая рамка с прозрачностью (`border: 1px solid rgba(255, 255, 255, 0.2)`)
  - Эффект размытия фона (`backdropFilter: "blur(8px)"`)
  - Градиентная полоса внизу кнопки с цветами бренда (оранжевый, черный, белый, лавандовый)
  - Анимированное свечение при наведении
  - Эффекты масштабирования при взаимодействии (увеличение при наведении, уменьшение при нажатии)
- Унифицированы все кнопки:
  - Кнопки фильтрации (Все, Активные, Завершенные)
  - Кнопки действий на карточках (Голосовать, Помочь)
  - Кнопки в модальных окнах (Закрыть, Отправить предложение)
  - Кнопка создания нового голосования
- Удален пользовательский компонент DarkButton в пользу стандартного GradientButton для обеспечения единообразия интерфейса

## Фирменный стиль

### Цветовая палитра
- Основные цвета бренда:
  - Оранжевый: `#FF7B1C`
  - Черный: `#111111`
  - Белый: `#FFFFFF`
  - Лавандовый: `#9D7BFF`
- Фирменный градиент: линейный градиент под углом -45 градусов, использующий все четыре фирменных цвета
- Применение градиента:
  - Анимированный фон для круговых элементов (счетчик голосов)
  - Анимация кнопок при наведении и нажатии
  - Фоновые элементы с пониженной прозрачностью для модальных окон 

## Страница профиля пользователя

### Основные изменения
1. **Дизайн фона:**
   - Черный фон с синим градиентным переходом в нижней части страницы (30% высоты)
   - Добавлены анимированные эффекты DeepGlow для создания глубины
   - Увеличено количество эффектов свечения с 5 до 8 для более насыщенного визуального эффекта
   - Все эффекты имеют синюю цветовую гамму разной интенсивности и размера

2. **Информация о пользователе:**
   - Отображение имени пользователя вместо заголовка "Мой профиль"
   - Квадратная карточка с курсом TON/USDT справа от имени пользователя
   - Карточка с курсом показывает текущую цену, изменение в долларах и процентах
   - Положительные/отрицательные изменения отображаются зеленым/красным цветом соответственно

3. **Токены и курсы:**
   - Установлен новый курс конвертации: 100,000 AHT = 1 TON (ahtPrice = 0.00001)
   - Баланс AHT отображается с разделителями для больших чисел
   - Расширена точность отображения стоимости в TON до 6 знаков после запятой
   - Добавлена информация о курсе конвертации в описании токенов

4. **Интерфейс и навигация:**
   - Скрыта вкладка "Мои NFT"
   - Оставлены только вкладки "История транзакций" и "Настройки"
   - Сохранена возможность включения режима отключенного кошелька (showDisconnectedWallet = false)

### Технические детали
- Использование Framer Motion для анимаций
- Адаптивный дизайн для мобильных и десктопных устройств
- Модульная структура с компонентами для различных элементов интерфейса
- Квадратная карточка TON/USDT размером 130×130px
- Градиентный эффект для фона с использованием TailwindCSS
- Использование backdrop-blur для создания эффекта матового стекла

### Моковые данные
```js
{
  ahtBalance: 75000000,
  tonBalance: 125.45,
  ahtPrice: 0.00001, // в TON (100000 AHT = 1 TON)
  userName: "Александр Петров",
  userAddress: 'EQD4FPq-PRDieyQKkizFTRtSDyucUIqrj0v_Mg_CyBQNZv99',
  isWalletConnected: true,
  tonUsdtRate: {
    current: 3.25,
    change: 0.18, // положительное значение = рост
    changePercentage: 5.86
  }
}
```

## Оптимизация навигации и структуры приложения

### Удаление демо-страницы ButtonDemo
1. **Причины удаления:**
   - Страница имела исключительно демонстрационный характер для разработчиков
   - Функционал ButtonDemo дублировал документацию компонентов
   - Упрощение навигации для конечных пользователей

2. **Технические изменения:**
   - Удален импорт компонента ButtonDemo из App.tsx:
     ```tsx
     const ButtonDemo = lazy(() => import('./pages/ButtonDemo'));
     ```
   - Удален маршрут `/buttons` из React Router:
     ```tsx
     <Route path="/buttons" element={<Layout><ButtonDemo /></Layout>} />
     ```
   - Удален пункт навигации из Footer.tsx:
     ```tsx
     {
       path: '/buttons',
       name: 'Кнопки',
       icon: UserIcon
     }
     ```
   - Изменена структура сетки в футере с 5 на 4 колонки:
     ```tsx
     <ul className="grid grid-cols-4 h-16">
     ```

3. **Преимущества изменений:**
   - Упрощение пользовательского интерфейса
   - Фокус на основных функциях приложения
   - Улучшение навигации между ключевыми разделами
   - Соответствие требованиям продакшн-версии приложения

4. **Сохранение компонента для будущих доработок:**
   - Файл `ButtonDemo.tsx` остается в проекте для использования командой разработки
   - Может быть временно подключен для тестирования новых компонентов
   - Сохраняется документация по использованию различных типов кнопок

## Исправления ошибок кода

### Исправление ошибок в страницах приложения
1. **Устранение дублирующего экспорта в Home.tsx:**
   - Обнаружен и исправлен повторный экспорт компонента:
   ```tsx
   export default Home;  // исправлено - удалена дублирующая строка
   export default Home;
   ```
   - Исправление помогло решить ошибку `Uncaught SyntaxError: Identifier '.default' has already been declared`
   - Улучшена стабильность работы приложения и устранены ошибки загрузки компонента

2. **Исправление некорректного атрибута JSX в Voting.tsx:**
   - Обнаружен недопустимый атрибут в компоненте style:
   ```tsx
   <style jsx>{`
   ```
   - Заменено на корректный вариант без атрибута jsx:
   ```tsx
   <style>{`
   ```
   - Устранена ошибка `Warning: Received 'true' for a non-boolean attribute 'jsx'`
   - Причина: атрибут jsx подходит только для специальных библиотек CSS-in-JS, таких как styled-jsx, и не является стандартным HTML-атрибутом

3. **Преимущества внесенных исправлений:**
   - Удаление предупреждений в консоли разработчика
   - Повышение стабильности работы приложения
   - Устранение потенциальных проблем с рендерингом компонентов
   - Соответствие стандартам React и лучшим практикам разработки
``` 