@tailwind base;
@tailwind components;
@tailwind utilities;

/* Global Mobile Optimizations */
:root {
  --vh: 1vh;
  --vw: 1vw;
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
}

html {
  height: -webkit-fill-available;
}

body {
  min-height: 100vh;
  min-height: -webkit-fill-available;
  min-height: calc(100 * var(--vh, 1vh));
  max-width: 100vw;
  overflow-x: hidden;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

input, textarea, button, select {
  font-size: 16px; /* Предотвращает автоматический зум на iOS */
}

/* Отключение выделения текста на мобильных устройствах */
* {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

/* Разрешить выделение текста в элементах, где это нужно */
input, textarea, [contenteditable="true"] {
  -webkit-user-select: text;
  -moz-user-select: text;
  -ms-user-select: text;
  user-select: text;
}

/* Улучшение скролла на мобильных устройствах */
@media (max-width: 768px) {
  * {
    -webkit-overflow-scrolling: touch;
  }

  /* Исправления для фиксированных элементов в iOS */
  .fixed {
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
  }
}

/* Fix iOS input padding */
@supports (-webkit-touch-callout: none) {
  input, textarea, select {
    font-size: 16px !important;
  }
}

/* Предотвращение смены цвета фона при клике на iOS */
* {
  -webkit-tap-highlight-color: transparent;
}

@layer base {
  html, body {
    @apply bg-tg-light-bg text-tg-light-text dark:bg-dark-900 dark:text-dark-100;
    overscroll-behavior: none;
}

  * {
    @apply font-sans;
  }
  
  #root {
    @apply flex flex-col min-h-screen;
  }
}

@layer components {
  /* Карточка с эффектом глубины - обновлена цветовая схема */
  .card {
    @apply bg-white dark:bg-dark-800 rounded-card shadow-depth shadow-highlight relative
           p-5 flex flex-col border border-brand-blue-light/20 dark:border-dark-700;
}

  /* Карточка среднего размера */
  .card-md {
    @apply bg-white dark:bg-dark-800 rounded-card-sm shadow-depth-sm shadow-highlight relative 
           p-4 flex flex-col border border-brand-blue-light/20 dark:border-dark-700;
}

  /* Малая карточка */
  .card-sm {
    @apply bg-brand-gray dark:bg-dark-700 rounded-card-sm shadow-depth-sm shadow-inner-light relative 
           p-3 flex flex-col border border-brand-blue-light/10 dark:border-dark-600;
  }
  
  /* Инверсные карточки (для вложенных элементов) */
  .card-inverse {
    @apply bg-brand-blue-light/10 dark:bg-dark-600 rounded-card-sm shadow-inner-light relative
           p-3 flex flex-col;
  }
  
  /* Кнопки в стиле flat design */
  .btn-flat-primary {
    @apply bg-brand-blue-dark text-white font-medium 
           py-3 px-6 rounded-md transition-all duration-200 shadow-flat-primary
           hover:bg-brand-blue-dark/90 active:shadow-none active:translate-y-0.5
           focus:outline-none focus:ring-2 focus:ring-brand-blue-medium focus:ring-opacity-50;
  }
  
  .btn-flat-secondary {
    @apply bg-brand-olive text-white font-medium py-3 px-6 
           rounded-md transition-all duration-200 shadow-flat-secondary
           hover:bg-brand-olive/90 active:shadow-none active:translate-y-0.5
           focus:outline-none focus:ring-2 focus:ring-brand-olive/50 focus:ring-opacity-50;
}

  /* Обновленные стили для основных кнопок */
  .btn-primary {
    @apply bg-brand-blue-dark hover:bg-brand-blue-dark/90 text-white font-medium 
           py-3 px-6 rounded-md transition-colors duration-200 shadow-depth-sm
           focus:outline-none focus:ring-2 focus:ring-brand-blue-medium focus:ring-opacity-50;
}

  .btn-secondary {
    @apply bg-brand-olive hover:bg-brand-olive/90 text-white font-medium py-3 px-6 
           rounded-md transition-colors duration-200 shadow-inner-light
           focus:outline-none focus:ring-2 focus:ring-brand-olive/50 focus:ring-opacity-50;
  }
  
  .btn-outline {
    @apply border border-brand-blue-medium text-brand-blue-dark hover:bg-brand-blue-light/10
           font-medium py-3 px-6 rounded-md transition-colors duration-200
           focus:outline-none focus:ring-2 focus:ring-brand-blue-medium focus:ring-opacity-50;
  }
  
  /* Поля ввода */
  .input {
    @apply rounded-card-sm border border-brand-blue-light/30 dark:border-dark-400 
           bg-white dark:bg-dark-700 
           px-4 py-3 text-tg-light-text dark:text-dark-100 
           focus:outline-none focus:ring-2 focus:ring-brand-blue-medium
           placeholder:text-gray-400 dark:placeholder:text-dark-300;
  }

  /* Заголовки с новыми цветами */
  .title-lg {
    @apply text-3xl font-bold text-brand-blue-dark dark:text-dark-50 mb-4;
  }

  .title-md {
    @apply text-2xl font-semibold text-brand-blue-dark dark:text-dark-50 mb-3;
}

  .title-sm {
    @apply text-lg font-medium text-brand-blue-dark dark:text-dark-50 mb-2;
  }

  /* Элементы списка */
  .list-item {
    @apply flex items-center p-3 border-b border-brand-blue-light/20 dark:border-dark-600 last:border-0;
}

  /* Счетчик/бейдж */
  .badge {
    @apply bg-brand-blue-light/30 text-brand-blue-dark dark:bg-dark-600 dark:text-dark-100 
           text-xs font-medium px-2 py-1 rounded-full;
  }

  .badge-primary {
    @apply bg-brand-blue-dark text-white;
  }

  /* Аватары и изображения */
  .avatar {
    @apply rounded-full overflow-hidden bg-brand-blue-light/30 dark:bg-dark-600 
           border border-brand-blue-light/20 dark:border-dark-400;
  }

  /* Боковая панель навигации */
  .tg-sidebar {
    @apply fixed left-0 top-0 h-full w-64 bg-white dark:bg-dark-800
           transition-transform duration-300 transform ease-in-out
           border-r border-brand-blue-light/20 dark:border-dark-600;
}

  /* Верхняя панель навигации */
  .tg-header {
    @apply h-16 bg-white/80 dark:bg-dark-800/80 backdrop-blur-md
           border-b border-brand-blue-light/20 dark:border-dark-600
           flex items-center px-4 shadow-depth-sm;
  }

  /* Контейнеры с полосами прокрутки */
  .scrollable {
    @apply scrollbar-thin scrollbar-thumb-brand-blue-medium/40 scrollbar-track-brand-blue-light/10
           dark:scrollbar-thumb-dark-400 dark:scrollbar-track-dark-800;
  }

  /* Иконки с эффектом глубины */
  .icon-container {
    @apply flex items-center justify-center w-10 h-10 
           rounded-full bg-brand-blue-light/20 dark:bg-dark-700 shadow-inner-light;
  }

  /* Навигационная иконка */
  .nav-icon {
    @apply flex items-center justify-center w-12 h-12 
           rounded-full bg-brand-gray dark:bg-dark-600 hover:bg-brand-blue-light/20 
           dark:hover:bg-dark-500 transition-colors;
  }

  /* Нижняя навигационная панель */
  .bottom-nav {
    @apply fixed bottom-0 left-0 right-0 z-50 
           bg-white/90 dark:bg-dark-800/90 backdrop-blur-md
           border-t border-brand-blue-light/20 dark:border-dark-600 
           shadow-depth py-2 px-4;
  }
}
